---
id: m-79a0
status: closed
deps: []
links: []
created: 2026-02-14T22:17:55Z
type: task
priority: 2
assignee: Steve Macbeth
parent: m-ba5d
---
# Update catch-up script for token extraction

Modify catch-up.sh to extract token counts from session JSONL files and include token_count in session summary frontmatter.

## Design

Files: scripts/catch-up.sh.
Approach: When generating summaries from JSONL, calculate total input+output tokens from the session file. Add token_count field to the YAML frontmatter of the generated summary. The JSONL files in ~/.claude/projects/ contain usage data per message â€” sum across all messages in the session.

## Acceptance Criteria

New session summaries generated by catch-up.sh include token_count in frontmatter. Existing summaries without token_count are left unchanged (API handles fallback).


## Notes

**2026-02-15T02:16:14Z**

Added token extraction from JSONL usage fields. Matches backfill-metrics.sh approach with jq-equivalent python.
