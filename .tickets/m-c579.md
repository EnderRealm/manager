---
id: m-c579
status: closed
deps: [m-4e83]
links: []
created: 2026-01-19T01:15:46Z
type: task
priority: 2
assignee: Steve Macbeth
parent: m-ae31
---
# Add card drop targets for dependency creation

Enable dropping tickets onto other tickets to create dependency relationships

## Design

Files: src/client/components/KanbanBoard.tsx, src/client/components/TicketCard.tsx

Changes to TicketCard.tsx:
- Add useDroppable hook from @dnd-kit
- Card becomes a drop target in addition to being draggable
- Visual feedback: highlight border/glow when valid drag hovers

Changes to KanbanBoard.tsx:
- Update handleDragEnd to detect card vs column drops
- If dropped on card: call new addDependency mutation
- Dragged ticket becomes blocked by target ticket

API:
- New endpoint or use existing tk CLI: tk dep <child-id> <parent-id>
- Add mutation in hooks or inline

Validation:
- Check for circular deps before allowing drop
- Card should not highlight if drop would create cycle

## Acceptance Criteria

- Cards highlight when valid drag hovers over them
- Dropping ticket A on ticket B creates A depends on B
- Circular dependencies rejected (no highlight, no action)
- Visual feedback distinguishes card targets from column targets

