---
id: m-287e
status: closed
deps: [m-7f0c]
links: []
created: 2026-02-15T04:25:13Z
type: task
priority: 2
assignee: Steve Macbeth
parent: m-6ba5
---
# Add sync scheduling to ticket mutation routes

Call scheduleSyncForProject after every mutating ticket route so changes are committed and pushed after 30s of inactivity.

## Design

Files: src/server/routes/tickets.ts

Add scheduleSyncForProject(projectId, projectPath) call after the tk command succeeds in each mutating route:
- POST /projects/:id/tickets (create)
- PATCH /projects/:id/tickets/:ticketId (update)
- DELETE /projects/:id/tickets/:ticketId (delete)
- POST /projects/:id/tickets/:ticketId/start
- POST /projects/:id/tickets/:ticketId/close
- POST /projects/:id/tickets/:ticketId/reopen
- POST /projects/:id/tickets/:ticketId/deps
- DELETE /projects/:id/tickets/:ticketId/deps/:blockerId
- POST /projects/:id/tickets/:ticketId/parent
- DELETE /projects/:id/tickets/:ticketId/parent

One-liner addition per route. No middleware - explicit and obvious.

## Acceptance Criteria

Every ticket mutation via the API triggers a debounced sync schedule. Multiple rapid mutations result in a single commit+push 30s after the last one.

